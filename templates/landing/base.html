<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}UMKM Blast Pro{% endblock %} - Automasi Telegram</title>
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}">
</head>
<body class="bg-gray-50 text-slate-800">

    <!-- NAVBAR FIXED -->
    <nav class="fixed w-full z-50 bg-white/80 backdrop-blur-md border-b border-gray-100 transition-all duration-300" id="navbar">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/" class="text-2xl font-bold flex items-center gap-2 text-indigo-600">
                <i class="fa-solid fa-rocket"></i> BlastPro
            </a>
            
            <!-- Desktop Menu -->
            <div class="hidden md:flex gap-8 text-sm font-medium text-gray-600">
                <a href="/#features" class="hover:text-indigo-600 transition">Fitur</a>
                <a href="/#pricing" class="hover:text-indigo-600 transition">Harga</a>
                <a href="/#faq" class="hover:text-indigo-600 transition">FAQ</a>
            </div>

            <!-- Auth Buttons (INI YANG PENTING BRE) -->
            <div class="flex gap-3">
                <!-- Tombol Masuk -> Lari ke /login -->
                <a href="/login" class="px-5 py-2.5 text-sm font-bold text-gray-600 hover:text-indigo-600 transition">Masuk</a>
                
                <!-- Tombol Daftar -> Lari ke /register -->
                <a href="/register" class="px-5 py-2.5 text-sm font-bold text-white bg-indigo-600 rounded-full hover:bg-indigo-700 transition shadow-lg shadow-indigo-200">Daftar Gratis</a>
            </div>
        </div>
    </nav>

    <!-- CONTENT -->
    {% block content %}{% endblock %}

    <!-- FOOTER -->
    {% include 'landing/_footer.html' %}

    <!-- SCRIPTS -->
<script>
        // Clock Widget
        setInterval(() => {
            const el = document.getElementById('clock-widget');
            if(el) {
                const now = new Date();
                el.innerText = now.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit', timeZone: 'Asia/Jakarta' }) + ' WIB';
            }
        }, 1000);

        // Helper: Simple Fetch Wrapper (PENTING: Jangan dihapus!)
        async function apiRequest(url, method = 'POST', body = null) {
            try {
                const opts = { method: method, headers: {'Content-Type': 'application/json'} };
                if (body) opts.body = JSON.stringify(body);
                const res = await fetch(url, opts);
                return await res.json();
            } catch (e) {
                return { status: 'error', message: 'Koneksi bermasalah.' };
            }
        }
    </script>

    {% if is_demo_mode %}
    <style>
        /* Sembunyikan elemen yang bikin demo jelek */
        a[href="/logout"], .badge-admin, button#btn-scan, button#btn-import { 
            pointer-events: none; opacity: 0.5; filter: grayscale(1); 
        }
        /* Tambah overlay biar user tau ini demo */
        body::before {
            content: "LIVE DEMO MODE";
            position: fixed;
            bottom: 10px; right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            font-size: 10px;
            border-radius: 5px;
            z-index: 9999;
            pointer-events: none;
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log("ðŸš€ DEMO MODE ACTIVE");

            // 1. BAJAK SEMUA LINK SIDEBAR (Anti Data Leak & Redirect Fix)
            document.querySelectorAll('a').forEach(link => {
                const href = link.getAttribute('href');
                
                if (!href) return;

                // A. Fix Link Ringkasan (yang biasanya cuma '/dashboard' doang)
                if (href === '/dashboard' || href === '/dashboard/') {
                    link.setAttribute('href', '/live-demo/dashboard');
                    // Paksa event click biar gak lolos
                    link.onclick = function(e) {
                        e.preventDefault();
                        window.location.href = '/live-demo/dashboard';
                    };
                }
                // B. Fix link dashboard lainnya (targets, schedule, dll)
                else if (href.startsWith('/dashboard/')) {
                    const page = href.split('/').pop();
                    link.setAttribute('href', `/live-demo/${page}`);
                }
                // C. Matikan Link Logout & Profil
                else if (href === '/logout' || href === '/dashboard/profile') {
                    link.href = "javascript:void(0)";
                    link.style.pointerEvents = "none";
                }
            });

            // 2. AUTO TOUR LOGIC (10 DETIK)
            const tourPages = [
                'dashboard', 
                'targets', 
                'schedule', 
                'crm',
                'broadcast',
                'connection'
            ];
            
            // Cek kita lagi di halaman mana
            const currentPath = window.location.pathname.split('/').pop();
            let currentIndex = tourPages.indexOf(currentPath);
            
            if (currentIndex === -1) currentIndex = 0; // Default ke awal kalo nyasar

            // Tentukan halaman berikutnya
            const nextIndex = (currentIndex + 1) % tourPages.length;
            const nextPage = tourPages[nextIndex];

            // Set Timer 10 Detik untuk pindah halaman
            setTimeout(() => {
                console.log(`Touring to: ${nextPage}`);
                window.location.href = `/live-demo/${nextPage}`;
            }, 10000); // 10000ms = 10 detik
        });
    </script>
    {% endif %}

    {% block scripts %}{% endblock %}
</body>
</html>


